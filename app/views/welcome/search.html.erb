<div class="container mt-4">
  <div id="map-container">
    <div id="map-canvas"
         style="height: 400px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"
         data-markers="<%= @markers.to_json %>"
         data-api-key="<%= ENV['GGL_MAP_JS_BROWSER_API_KEY'] %>">
      <div class="text-center p-5">
        <i class="fas fa-spinner fa-spin fa-3x text-primary"></i>
        <p class="mt-3">Chargement de la carte...</p>
      </div>
    </div>
  </div>

  <h1 class="mt-4"><%= t('search.title', default: 'Available flights') %></h1>

  <%= will_paginate @coordonnees, class: 'pagination justify-content-center' %>

  <table class="table table-hover">
    <thead>
      <tr>
        <th><%= t('search.name', default: 'Name') %></th>
        <th><%= t('search.ref', default: 'Ref #') %></th>
        <th><%= t('search.flight_number', default: 'Flight #') %></th>
        <th><%= t('search.departure', default: 'Departure') %></th>
        <th><%= t('search.arrival', default: 'Arrival') %></th>
        <th><%= t('search.nb_bagages', default: 'Bags') %></th>
        <th><%= t('search.weight', default: 'Weight') %></th>
        <th><%= t('search.volume', default: 'Volume') %></th>
        <th><%= t('search.price', default: 'Price') %></th>
      </tr>
    </thead>
    <tbody>
      <% @flights_data.each do |data| %>
        <tr>
          <td><%= link_to data[:user].name, booking_path(data[:booking]) %></td>
          <td><%= data[:booking].ref_number %></td>
          <td><%= data[:vol].num_vol %></td>
          <td><%= data[:departure]&.location %></td>
          <td><%= data[:arrival]&.location %></td>
          <td><%= data[:nb_bagages] %></td>
          <td><%= data[:poids] %> kg</td>
          <td><%= data[:volume] %> cm&sup3;</td>
          <td><%= number_to_currency(data[:prix], unit: "\u20AC") %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%= will_paginate @coordonnees, class: 'pagination justify-content-center' %>
</div>
