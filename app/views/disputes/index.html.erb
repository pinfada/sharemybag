<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-gavel me-2"></i>My Disputes</h2>
  </div>

  <% if @disputes.any? %>
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Type</th>
            <th>Title</th>
            <th>Status</th>
            <th>Priority</th>
            <th>Opened</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @disputes.each do |dispute| %>
            <tr>
              <td><%= dispute.id %></td>
              <td>
                <span class="badge bg-secondary"><%= dispute.dispute_type.humanize %></span>
              </td>
              <td><%= dispute.title %></td>
              <td>
                <% status_class = case dispute.status
                   when 'opened' then 'warning'
                   when 'under_review', 'evidence_requested' then 'info'
                   when 'escalated', 'mediation' then 'danger'
                   when 'resolved', 'closed' then 'success'
                   when 'rejected' then 'dark'
                   else 'secondary'
                   end %>
                <span class="badge bg-<%= status_class %>"><%= dispute.status.humanize %></span>
              </td>
              <td>
                <% priority_class = case dispute.priority
                   when 'urgent' then 'danger'
                   when 'high' then 'warning'
                   when 'normal' then 'info'
                   else 'secondary'
                   end %>
                <span class="badge bg-<%= priority_class %>"><%= dispute.priority.capitalize %></span>
              </td>
              <td><%= dispute.created_at.strftime("%d/%m/%Y") %></td>
              <td>
                <%= link_to "View", dispute_path(dispute), class: "btn btn-sm btn-outline-primary" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <%= will_paginate @disputes, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
  <% else %>
    <div class="text-center py-5">
      <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
      <h4>No disputes</h4>
      <p class="text-muted">You don't have any open disputes.</p>
    </div>
  <% end %>
</div>
